package com.shop.entity;

import org.apache.catalina.Role;
import org.springframework.security.crypto.password.PasswordEncoder;

import groovy.transform.ToString;
import jakarta.persistence.*;
import jakarta.persistence.Entity;
import jakarta.persistence.EnumType;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.GenerationType;
import jakarta.persistence.Id;
import jakarta.persistence.Table;
import jakarta.persistence.TableGenerator;
import lombok.Getter;
import lombok.Setter;

public class Member {
@Entity 
@TableGenerator(name="member")

@Setter
@Getter
@lombok.ToString


	@Id
	@Column(name="member_id")
	@GeneratedValue(strategy=GenerationType.AUTO)
	
	private Long id;
	private String name;
	private String email;
	@Column(unique=true)
	private String password;
	private String address;
	@Euimerated(EnumType.STRING)
	private Role role;
	
	public static Member createMember(MemberFormDto memberFormDto,
									  PasswordEncoder passwordEncoder) {
		   Member member=new Member();
		   member.setName(memberFormDto.getName());
		   member.setEmail(memberFormDto.getEmail());
		   member.setAddress(memberFormDto.getAddress());
		   String password = passwordEncoder.dncode(memberFormDto.getPassword());
		   member.setPassword(password);
		   member.setRole(Role.USER);
		   return member;
	}
	
}

